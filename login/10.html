<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Maths App Calculator</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body { font-family: Arial, sans-serif; margin:24px; text-align:center; background:#fafafa; }
    h1 { margin-bottom:16px; }
    input { 
      font-size:20px; 
      padding:12px; 
      width:260px; 
      text-align:center; 
      margin:12px auto; 
      display:block;
      border:2px solid #ccc;
      border-radius:8px;
    }
    .readonly { background:#eee; }
    button { 
      margin:12px; padding:12px 20px; font-size:18px; border-radius:8px; border:0; cursor:pointer; 
    }
    .btn-submit { background:#0040ff; color:#fff; font-weight:bold; }
    .btn-reset { background:#e74c3c; color:#fff; font-weight:bold; }
    .grid { 
      display:grid; grid-template-columns:repeat(3,90px); grid-auto-rows:54px; gap:8px;
      margin:auto; margin-top:18px; border:2px solid #333; padding:12px; width:max-content;
    }
    .cell { 
      display:flex; align-items:center; justify-content:center; 
      font-weight:700; font-size:20px;
      border:1px solid #666; border-radius:4px;
    }
    .pager { margin-top:18px; }
    .btn-nav { background:#1abc9c; color:#fff; font-weight:bold; }
  </style>
</head>
<body>

<!-- PAGE 1 -->
<div id="page1">
  <h2>Input</h2>
  <h1>Maths App Calculator</h1>
  <input id="row1" maxlength="10" placeholder="Enter digits" oninput="autoFillBalance()" />
  <input id="row2" class="readonly" readonly placeholder="Balance digits appear here" />
  <div>
    <button class="btn-submit" onclick="prepareNumber()">Submit</button>
    <button class="btn-reset" onclick="resetAll()">✖</button>
  </div>
</div>

<!-- PAGE 2 -->
<div id="page2" style="display:none;">
  <h1>3×10 Matrix Result</h1>
  <p>Merged 10-digit number:</p>
  <h2 id="mergedNumber"></h2>
  <div id="gridContainer"></div>
  <div id="pager" class="pager"></div>
  <button class="btn-reset" onclick="goBack()">⬅ Back</button>
</div>

<script>
let allSequences = [];
let currentPage = 0;
let merged = "";

/* Auto-fill second row with missing digits */
function autoFillBalance() {
  let value = document.getElementById("row1").value.replace(/\D/g,"");

  // remove duplicates while keeping order
  let seen = new Set();
  let unique = "";
  for (let ch of value) {
    if (!seen.has(ch)) {
      seen.add(ch);
      unique += ch;
    }
  }

  // restrict to max 10 unique digits
  if (unique.length > 10) {
    unique = unique.substring(0,10);
  }
  document.getElementById("row1").value = unique;

  // balance digits
  let all = "0123456789".split("");
  let used = unique.split("");
  let balance = all.filter(d => !used.includes(d)).join("");
  document.getElementById("row2").value = balance;
}

/* Step 1: Merge inputs */
function prepareNumber() {
  const part1 = document.getElementById("row1").value.trim();
  const part2 = document.getElementById("row2").value.trim();
  merged = part1 + part2;

  if (merged.length !== 10) { 
    alert("Total must be exactly 10 unique digits (0–9)."); 
    return; 
  }

  goNext();
}

/* Step 2: Generate rotation sequence dynamically */
function generateSequence(numStr) {
  const n = numStr.length;
  const original = numStr.split('');
  const last = original[n-1];
  const withoutLast = original.slice(0, n-1);
  const results = [];

  for (let i = 0; i < n; i++) {
    const arr = withoutLast.slice();
    arr.splice(i, 0, last);
    results.push(arr.join(''));
  }
  return results;
}

/* Split into 2-digit pairs */
function splitPairs(s) {
  const pairs = [];
  for (let i=0; i<s.length; i+=2) {
    pairs.push(s.substring(i, i+2));
  }
  return pairs;
}

/* Step 3: Page navigation */
function goNext() {
  allSequences = generateSequence(merged);
  currentPage = 0;
  renderPage();
  document.getElementById("page1").style.display="none";
  document.getElementById("page2").style.display="block";
}

function goBack() {
  document.getElementById("page2").style.display="none";
  document.getElementById("page1").style.display="block";
}

/* Step 4: Render output grid row-by-row */
function renderPage() {
  const seq = allSequences[currentPage];
  document.getElementById("mergedNumber").textContent = seq;

  const pairs = splitPairs(seq);
  const gridContainer = document.getElementById("gridContainer");
  gridContainer.innerHTML = "";

  const grid = document.createElement("div");
  grid.className="grid";

  // Fill row by row in 3×10 matrix
  for (let r=0; r<10; r++) {
    for (let c=0; c<3; c++) {
      const idx = (r * 3 + c) % pairs.length;
      const cell = document.createElement("div");
      cell.className="cell";
      cell.textContent = pairs[idx] || "";
      grid.appendChild(cell);
    }
  }

  gridContainer.appendChild(grid);

  // pager
  const pager = document.getElementById("pager");
  pager.innerHTML="";
  const totalPages = allSequences.length;
  const prevBtn = document.createElement("button");
  prevBtn.textContent="⬅ Previous"; prevBtn.className="btn-nav";
  prevBtn.disabled = currentPage===0;
  prevBtn.onclick = ()=>{ if(currentPage>0){currentPage--;renderPage();}};
  pager.appendChild(prevBtn);

  pager.append(" Page "+(currentPage+1)+" / "+totalPages+" ");

  const nextBtn = document.createElement("button");
  nextBtn.textContent="Next ➡"; nextBtn.className="btn-nav";
  nextBtn.disabled = currentPage===totalPages-1;
  nextBtn.onclick = ()=>{ if(currentPage<totalPages-1){currentPage++;renderPage();}};
  pager.appendChild(nextBtn);
}

function resetAll(){
  document.getElementById("row1").value="";
  document.getElementById("row2").value="";
  goBack(); 
}
</script>


<!-- <script>
let allSequences = [];
let currentPage = 0;
let merged = "";

/* Auto-fill second row with missing digits from 0–9 */
function autoFillBalance() {
  let value = document.getElementById("row1").value.replace(/\D/g,"");

  // remove duplicates while keeping order
  let seen = new Set();
  let unique = "";
  for (let ch of value) {
    if (!seen.has(ch)) {
      seen.add(ch);
      unique += ch;
    }
  }
  document.getElementById("row1").value = unique;

  // balance digits
  let all = "0123456789".split("");
  let used = unique.split("");
  let balance = all.filter(d => !used.includes(d)).join("");
  document.getElementById("row2").value = balance;
}

/* Step 1: Merge inputs */
function prepareNumber() {
  const part1 = document.getElementById("row1").value.trim();
  const part2 = document.getElementById("row2").value.trim();
  merged = part1 + part2;

  if (merged.length !== 10) { 
    alert("Must total exactly 10 digits (0–9, no repeats)."); 
    return; 
  }

  goNext();
}

/* Step 2: Generate rotation sequence */
function generateSequence(numStr) {
  const n = numStr.length;
  const original = numStr.split('');
  const last = original[n-1];
  const withoutLast = original.slice(0, n-1);
  const results = [];
  for (let i = 0; i < n; i++) {
    const insertIndex = (n - 1) - i;
    const arr = withoutLast.slice();
    arr.splice(insertIndex, 0, last);
    results.push(arr.join(''));
  }
  return results;
}

/* Split into 2-digit pairs */
function splitPairs(s) {
  const pairs = [];
  for (let i=0; i<s.length; i+=2) pairs.push(s.substring(i,i+2));
  return pairs;
}

/* Step 3: Page navigation */
function goNext() {
  allSequences = generateSequence(merged);
  currentPage = 0;
  renderPage();
  document.getElementById("page1").style.display="none";
  document.getElementById("page2").style.display="block";
}

function goBack() {
  document.getElementById("page2").style.display="none";
  document.getElementById("page1").style.display="block";
}

function renderPage() {
  const seq = allSequences[currentPage];
  document.getElementById("mergedNumber").textContent = seq;

  const pairs = splitPairs(seq);
  const gridContainer = document.getElementById("gridContainer");
  gridContainer.innerHTML = "";

  const grid = document.createElement("div");
  grid.className="grid";

  for (let r=0; r<10; r++) {
    for (let c=0; c<3; c++) {
      const idx = (r+c) % pairs.length; // diagonal shift
      const cell = document.createElement("div");
      cell.className="cell";
      cell.textContent = pairs[idx] || "";
      grid.appendChild(cell);
    }
  }

  gridContainer.appendChild(grid);

  // pager
  const pager = document.getElementById("pager");
  pager.innerHTML="";
  const totalPages = allSequences.length;
  const prevBtn = document.createElement("button");
  prevBtn.textContent="⬅ Previous"; prevBtn.className="btn-nav";
  prevBtn.disabled = currentPage===0;
  prevBtn.onclick = ()=>{ if(currentPage>0){currentPage--;renderPage();}};
  pager.appendChild(prevBtn);

  pager.append(" Page "+(currentPage+1)+" / "+totalPages+" ");

  const nextBtn = document.createElement("button");
  nextBtn.textContent="Next ➡"; nextBtn.className="btn-nav";
  nextBtn.disabled = currentPage===totalPages-1;
  nextBtn.onclick = ()=>{ if(currentPage<totalPages-1){currentPage++;renderPage();}};
  pager.appendChild(nextBtn);
}

function resetAll(){
  document.getElementById("row1").value="";
  document.getElementById("row2").value="";
  goBack();
}
</script> -->
</body>
</html>